Creating a simple Library Management System in C that uses functions, files, structures,
and pointers. This system will allow you to add, display, and search for books and store the
book data in a file for persistence.
Steps to Implement the Library Management System
● Define a Structure to Represent a Book
● Implement Functions to Add, Display, and Search Books
● Use Files to Store and Retrieve Book Data
● Use Pointers to Manage the List of Books Dynamically

Define a Structure to Represent a Book:
The Book structure contains fields for id, title, author, and a pointer next to
the next book.
Implement Functions to Add, Display, and Search Books:
● addBook: Adds a new book to the list.
● displayBooks: Displays all books in the list.
● searchBook: Searches for a book by its ID.
Use Files to Store and Retrieve Book Data:
● saveBooksToFile: Saves the book list to a file.
● loadBooksFromFile: Loads the book list from a file.
Use Pointers to Manage the List of Books Dynamically:
● The book list is managed using a linked list, with pointers dynamically allocating
and linking book nodes.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
// Define a structure to represent a book
struct Book {
int id;
char title[100];
char author[100];
struct Book *next;
};
// Function prototypes
void addBook(struct Book **head);
void displayBooks(struct Book *head);
struct Book* searchBook(struct Book *head, int id);
void saveBooksToFile(struct Book *head, const char *filename);
void loadBooksFromFile(struct Book **head, const char *filename);
int main() {
struct Book *head = NULL;
int choice, id;
const char *filename = "books.dat";
loadBooksFromFile(&head, filename);
while (1) {
printf("\nLibrary Management System:\n");
printf("1. Add Book\n");
printf("2. Display Books\n");
printf("3. Search Book\n");
printf("4. Save and Exit\n");
printf("Enter your choice: ");
scanf("%d", &choice);
switch (choice) {
case 1:
addBook(&head);
break;
case 2:
displayBooks(head);
break;
case 3:
printf("Enter book ID to search: ");
scanf("%d", &id);
struct Book *book = searchBook(head, id);
if (book) {
printf("Book found: ID = %d, Title = %s, Author = %s\n", book->id, book->title,

book->author);
} else {
printf("Book not found.\n");
}
break;
case 4:
saveBooksToFile(head, filename);
printf("Books saved to file. Exiting...\n");
exit(0);
break;
default:
printf("Invalid choice. Please try again.\n");
}
}
return 0;
}
// Function to add a book
void addBook(struct Book **head) {
struct Book *newBook = (struct Book*)malloc(sizeof(struct Book));
printf("Enter book ID: ");
scanf("%d", &newBook->id);
printf("Enter book title: ");
scanf(" %[^\n]", newBook->title);
printf("Enter book author: ");
scanf(" %[^\n]", newBook->author);
newBook->next = *head;
*head = newBook;
printf("Book added successfully.\n");
}
// Function to display all books
void displayBooks(struct Book *head) {
struct Book *current = head;
printf("\nBook List:\n");
while (current) {
printf("ID: %d, Title: %s, Author: %s\n", current->id, current->title, current->author);
current = current->next;
}
}
// Function to search for a book by ID
struct Book* searchBook(struct Book *head, int id) {
struct Book *current = head;
while (current) {
if (current->id == id) {
return current;
}
current = current->next;
}
return NULL;
}
// Function to save books to a file
void saveBooksToFile(struct Book *head, const char *filename) {
FILE *file = fopen(filename, "wb");
if (!file) {
printf("Error: Could not open file for writing.\n");
return;
}
struct Book *current = head;
while (current) {
fwrite(current, sizeof(struct Book), 1, file);
current = current->next;
}
fclose(file);
}
// Function to load books from a file
void loadBooksFromFile(struct Book **head, const char *filename) {
FILE *file = fopen(filename, "rb");
if (!file) {
printf("Error: Could not open file for reading.\n");
return;
}
struct Book temp;
while (fread(&temp, sizeof(struct Book), 1, file)) {
struct Book *newBook = (struct Book*)malloc(sizeof(struct Book));
*newBook = temp;
newBook->next = *head;
*head = newBook;
}
